<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>青木九蘭-ｷｭｰ蘭について</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=VT323&display=swap" rel="stylesheet">
    <style>
        /* * General Body and Desktop Styling */
        body {
            font-family: 'VT323', monospace;
            background-color: #c0c0c0;
            background-image:
                linear-gradient(45deg, #808080 25%, transparent 25%),
                linear-gradient(-45deg, #808080 25%, transparent 25%),
                linear-gradient(45deg, transparent 75%, #808080 75%),
                linear-gradient(-45deg, transparent 75%, #808080 75%);
            background-size: 2px 2px;
            color: #000;
            margin: 0;
            padding: 0;
            height: 100vh;
            overflow: hidden; /* Hide scrollbars on desktop */
            user-select: none;
        }

        #desktop {
            padding-top: 24px; /* Space for menu bar */
            height: 100%;
            width: 100%;
            position: relative;
        }
        
        /* * Top Menu Bar */
        #menu-bar {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 24px;
            background-color: #d4d4d4;
            border-bottom: 2px solid #000;
            display: flex;
            align-items: center;
            padding: 0 10px;
            box-sizing: border-box;
            z-index: 1000;
        }

        #menu-bar .menu-item {
            padding: 2px 8px;
            font-size: 18px;
            cursor: pointer;
        }
        
        #menu-bar .menu-item.active {
            background-color: #000;
            color: #fff;
        }

        /* * Completion Message Styling */
        #completion-message {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 48px;
            color: #000;
            background-color: #d4d4d4;
            padding: 20px 40px;
            border: 2px solid #000;
            box-shadow: 5px 5px 0px rgba(0,0,0,0.7);
            text-align: center;
            z-index: 2000; /* Make sure it's on top of everything */
        }

        /* * Window Styling (Desktop) */
        .window {
            position: absolute;
            width: 500px;
            min-height: 250px;
            background-color: #d4d4d4;
            border: 2px solid #000;
            box-shadow: 5px 5px 0px rgba(0,0,0,0.7);
            display: flex;
            flex-direction: column;
            /* Styles for loading animation: Initially clipped and invisible */
            opacity: 0;
            clip-path: inset(0 0 100% 0);
            transition: opacity 0.2s ease-out, clip-path 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        /* This class is added by JS to trigger the animation */
        .window.loaded {
            opacity: 1;
            clip-path: inset(0 0 0 0); /* Reveal the window */
        }

        .title-bar {
            height: 22px;
            background-color: #d4d4d4;
            border-bottom: 2px solid #000;
            padding: 0 5px;
            cursor: move;
            display: flex;
            align-items: center;
            position: relative;
            background-image: repeating-linear-gradient(to bottom, #d4d4d4, #d4d4d4 4px, #b0b0b0 4px, #b0b0b0 5px);
        }

        .title-bar-text {
            font-size: 18px;
            margin: 0 auto;
            padding-left: 20px; /* Space for close box */
        }
        
        .close-box {
            position: absolute;
            top: 3px;
            left: 5px;
            width: 14px;
            height: 14px;
            border: 1px solid #000;
            cursor: pointer;
        }
        .close-box:hover {
            background-color: #000;
        }

        .window-content {
            padding: 15px;
            flex-grow: 1;
            font-size: 20px;
            line-height: 1.6;
            display: flex;
            flex-wrap: wrap;
            align-content: flex-start;
        }
        
        .window-content h2 {
            font-size: 24px;
            margin-top: 0;
            text-align: center;
            width: 100%;
        }
        
        .window-content a {
            color: #0000FF;
            text-decoration: underline;
        }
        
        /* * Icon Styling */
        .icon {
            width: 80px;
            height: 90px;
            margin: 10px;
            text-align: center;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: flex-start;
            font-size: 16px;
            cursor: pointer;
        }
        .icon-visual {
            width: 60px;
            height: 60px;
            margin-bottom: 5px;
            background-size: contain;
            background-repeat: no-repeat;
            background-position: center;
        }
        .icon-folder {
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 64 64'%3E%3Cpath d='M4 12 H24 V10 C24 8 26 6 28 6 H36 C38 6 40 8 40 10 V12 H60 V50 H4z' fill='%23d4d4d4' stroke='%23000' stroke-width='2'/%3E%3C/svg%3E");
        }
        
        .hidden {
            display: none;
        }

        /* * Responsive Styles for Mobile */
        @media (max-width: 768px) {
            body {
                overflow: auto; /* Allow scrolling on mobile */
            }

            #desktop {
                height: auto;
                padding-top: 44px; /* Extra space for menu bar */
                /* --- MODIFIED: Reverse window order on mobile --- */
                display: flex;
                flex-direction: column-reverse;
            }
            
            #menu-bar {
                height: auto;
                flex-wrap: wrap;
            }

            .window {
                position: relative !important; /* Override inline absolute positioning */
                width: 95% !important;
                left: 0 !important;
                top: 0 !important;
                margin: 0 auto 20px auto !important;
                box-shadow: none !important;
                min-height: 0 !important;
            }

            .title-bar {
                cursor: default; /* No dragging on mobile */
            }

            .window-content {
                font-size: 18px;
            }
        }

    </style>
</head>
<body>
    <!-- Top Menu Bar -->
    <div id="menu-bar">
        <div class="menu-item active" data-target="profile-window">Profile</div>
        <div class="menu-item" data-target="sns-window">SNS</div>
        <div class="menu-item" data-target="content-window">Content</div>
        <div class="menu-item" data-target="contact-window">Contact</div>
        <div class="menu-item" data-target="blog-window">Blog</div>
    </div>


    <!-- Desktop area containing all windows -->
    <div id="desktop">

        <!-- Windows are now ordered by z-index -->
        <div class="window" id="blog-window" style="top: 150px; left: 300px; z-index: 1;">
            <div class="title-bar"><div class="close-box"></div><div class="title-bar-text">Blog</div></div>
            <div class="window-content" style="display: block;"><h2>気が向いたら最近あったこととか書こうと思います。</h2><p>- 今の所特になし<br>- Building modern apps with retro style<br>- The beauty of pixel fonts</p></div>
        </div>

        <div class="window" id="contact-window" style="top: 120px; left: 250px; z-index: 2;">
            <div class="title-bar"><div class="close-box"></div><div class="title-bar-text">Contact</div></div>
            <div class="window-content" style="display: block;"><h2>漏れのメアド(仕事用)</h2><p>下からご連絡ください。<br><a href="https://mail.google.com/mail/">aokikyuran@gmail.com</a></p></div>
        </div>
        
        <div class="window" id="content-window" style="top: 90px; left: 200px; z-index: 3;">
            <div class="title-bar"><div class="close-box"></div><div class="title-bar-text">Content</div></div>
            <div class="window-content">
                <!-- Modified Content: Link to external site -->
                <a href="https://aozora-select-production.up.railway.app/" target="_blank" style="text-decoration: none; color: inherit;">
                    <div class="icon">
                        <div class="icon-visual icon-folder"></div>
                        <div class="icon-label">青空文庫AI推薦</div>
                    </div>
                </a>
            </div>
        </div>

        <div class="window" id="sns-window" style="top: 60px; left: 150px; z-index: 4;">
            <div class="title-bar"><div class="close-box"></div><div class="title-bar-text">SNS</div></div>
            <div class="window-content" style="display: block;">
                <h2>SNS垢一覧</h2>
                <p>
                    X (Twitter): <a href="https://x.com/aokikyuran">@aokikyuranan</a><br>
                    GitHub:<a href="https://github.com/moritaryo0">github.com/moritaryo0</a><br>
                    atcoder: <a href="https://atcoder.jp/users/antyamo">私の競プロ垢(クソ雑魚)</a><br>
            </p>
            </div>
        </div>
        
        <div class="window" id="profile-window" style="top: 30px; left: 100px; z-index: 5;">
            <div class="title-bar"><div class="close-box"></div><div class="title-bar-text">自己紹介</div></div>
            <div class="window-content" style="display: block;"><h2>青木九蘭(ｷｭｰ蘭)</h2><p><br>アプリ制作、文字書き、絵、音楽、自作キーボード、なんでもかんでも手を出します。<br>ただ、ありのままに</p></div>
        </div>
        
        <!-- Completion Message (hidden by default) -->
        <div id="completion-message" class="hidden">
            Thank You!
        </div>

    </div>

    <script>
        // --- Global variable for z-index management ---
        let maxZ = 10;
        let isDesktop = window.innerWidth > 768;

        /**
         * Makes all elements with the class 'window' draggable by their 'title-bar'.
         * Also handles bringing windows to the front when clicked.
         */
        function makeWindowsDraggable() {
            const windows = document.querySelectorAll('.window');
            windows.forEach(win => {
                const titleBar = win.querySelector('.title-bar');
                // Bring window to the front on mousedown
                win.addEventListener('mousedown', () => {
                    maxZ++;
                    win.style.zIndex = maxZ;
                }, true);
                // Enable dragging only on desktop
                if (titleBar && isDesktop) {
                    dragElement(win, titleBar);
                }
            });
        }
        
        function dragElement(elmnt, header) {
            let pos1 = 0, pos2 = 0, pos3 = 0, pos4 = 0;
            header.onmousedown = dragMouseDown;

            function dragMouseDown(e) {
                if (e.target.classList.contains('close-box')) return;
                e = e || window.event;
                e.preventDefault();
                pos3 = e.clientX;
                pos4 = e.clientY;
                document.onmouseup = closeDragElement;
                document.onmousemove = elementDrag;
            }

            function elementDrag(e) {
                e = e || window.event;
                e.preventDefault();
                pos1 = pos3 - e.clientX;
                pos2 = pos4 - e.clientY;
                pos3 = e.clientX;
                pos4 = e.clientY;
                elmnt.style.top = (elmnt.offsetTop - pos2) + "px";
                elmnt.style.left = (elmnt.offsetLeft - pos1) + "px";
            }

            function closeDragElement() {
                document.onmouseup = null;
                document.onmousemove = null;
            }
        }
        
        /**
         * Sets up the tab-switching functionality for the main menu.
         */
        function setupMenuTabs() {
            const menuItems = document.querySelectorAll('#menu-bar .menu-item[data-target]');
            menuItems.forEach(item => {
                item.addEventListener('click', () => {
                    const targetId = item.dataset.target;
                    const targetWindow = document.getElementById(targetId);
                    if (!targetWindow) return;

                    // Bring the target window to the front
                    maxZ++;
                    targetWindow.style.zIndex = maxZ;

                    // Update active state on menu items
                    menuItems.forEach(i => i.classList.remove('active'));
                    item.classList.add('active');
                });
            });
        }

        /**
         * Sets up the close button functionality and checks for completion.
         */
        function setupCloseButtons() {
            const closeBoxes = document.querySelectorAll('.close-box');
            closeBoxes.forEach(box => {
                box.addEventListener('click', (e) => {
                    e.stopPropagation();
                    const windowToClose = box.closest('.window');
                    if (windowToClose) {
                        windowToClose.classList.add('hidden');
                        
                        // Deactivate corresponding menu item
                        const menuTarget = document.querySelector(`.menu-item[data-target="${windowToClose.id}"]`);
                        if(menuTarget) {
                            menuTarget.classList.remove('active');
                        }

                        checkAllWindowsClosed();
                    }
                });
            });
        }

        /**
         * Checks if all main windows are closed and shows a completion message.
         */
        function checkAllWindowsClosed() {
            const mainWindows = document.querySelectorAll('#profile-window, #sns-window, #content-window, #contact-window, #blog-window');
            const allClosed = Array.from(mainWindows).every(win => win.classList.contains('hidden'));

            if (allClosed) {
                const message = document.getElementById('completion-message');
                message.classList.remove('hidden');
            }
        }

        /**
         * Initiates the loading sequence for windows on page load.
         */
        function startLoadingSequence() {
            const windowsToLoad = Array.from(document.querySelectorAll('#profile-window, #sns-window, #content-window, #contact-window, #blog-window'));

            // Sort windows by z-index in ascending order (lowest first)
            windowsToLoad.sort((a, b) => {
                const zIndexA = parseInt(window.getComputedStyle(a).zIndex, 10) || 0;
                const zIndexB = parseInt(window.getComputedStyle(b).zIndex, 10) || 0;
                return zIndexA - zIndexB;
            });

            // Reveal windows one by one
            windowsToLoad.forEach((win, index) => {
                setTimeout(() => {
                    win.classList.add('loaded');
                }, index * 200); // 200ms delay between each window
            });

            // After the animation, initialize the interactive features
            const totalAnimationTime = windowsToLoad.length * 200;
            setTimeout(() => {
                makeWindowsDraggable();
                setupMenuTabs();
                setupCloseButtons();
            }, totalAnimationTime);
        }

        // --- Initialize all functionality on page load ---
        window.onload = startLoadingSequence;

        // Optional: Handle window resize to switch between desktop/mobile logic
        window.addEventListener('resize', () => {
            const wasDesktop = isDesktop;
            isDesktop = window.innerWidth > 768;
            if (wasDesktop !== isDesktop) {
                location.reload(); 
            }
        });
    </script>

</body>
</html>
